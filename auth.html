<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>SidraFly â€” Sign in</title>

<style>
@import url("https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap");

/* Background */
#bgCanvas{position:fixed;inset:0;width:100vw;height:100vh;z-index:-2}
.glow-area{position:fixed;inset:0;z-index:-1;background:
  radial-gradient(circle at 15% 10%, #1a237e 0%, transparent 60%),
  radial-gradient(circle at 85% 40%, #ff2a6d55 0%, transparent 65%),
  radial-gradient(circle at 70% 85%, #6c00ff55 0%, transparent 65%),
  #080010}

/* Theme + tokens */
:root{
  --button:#1b1436;
  --brand:#ff7a00;
  --text:#fff;
  --muted:#b6b8c1;
  --purple1:#CF33FF;
  --purple2:#8233FF;
  --glass:rgba(255,255,255,0.04);
  --persist-glow:0 0 10px rgba(255,44,44,0.65), 0 0 18px rgba(255,44,44,0.45);
}
html,body{height:100%}
body{
  margin:0;padding:0;font-family:"Poppins",sans-serif;color:var(--text);
  display:flex;justify-content:center;align-items:center;min-height:100vh;overflow-y:auto;background:transparent;
}

/* Container */
.container{
  width:min(92%, 430px);
  padding:36px 26px 34px;
  border-radius:28px;
  background:var(--glass);
  backdrop-filter:blur(14px);
  box-shadow:0 0 42px rgba(255,255,255,0.25);
  border:1px solid rgba(255,255,255,0.1);
}

/* Brand */
.brand{text-align:center;margin-bottom:18px}
.brand img{width:82px;height:82px;border-radius:50%;border:2px solid rgba(255,122,0,0.55)}
.brand h1{font-size:2rem;margin:12px 0 0}
.brand span{color:var(--brand)}
.brand p{margin-top:8px;font-size:.95rem;color:var(--muted)}

/* Buttons */
.btn{
  width:100%;height:52px;border-radius:14px;
  background:var(--button);
  border:1px solid rgba(255,255,255,0.12);
  margin-top:14px;color:#fff;font-size:1rem;font-weight:500;
  display:flex;align-items:center;justify-content:center;gap:12px;
  cursor:pointer;transition:.2s;
}
.btn:hover{transform:translateY(-2px)}
.btn-apple{background:#000}
.btn-email{background:var(--button)}
.icon svg{width:22px;height:22px;display:block}
.btn.active{ box-shadow:var(--persist-glow); border:1px solid rgba(255,44,44,0.9) }

/* Divider */
.divider{display:flex;align-items:center;justify-content:center;gap:12px;margin:22px 0 14px;color:var(--muted);font-size:.9rem}
.divider:before,.divider:after{content:"";height:1px;flex:1;background:linear-gradient(90deg, transparent, rgba(255,255,255,0.25), transparent)}

/* Fields */
.field{margin-top:14px}
.label{font-size:.9rem;margin-bottom:6px;color:#bfc2cf;display:flex;align-items:center;gap:8px}
input{width:85%;height:50px;border-radius:14px;border:1px solid rgba(255,255,255,0.18);background:rgba(255,255,255,0.05);padding:0 14px;color:#fff;font-size:.95rem;display:block;margin:0 auto;outline:none;transition:.2s;}
input:focus{ box-shadow:var(--persist-glow); border:1px solid rgba(255,44,44,0.9) }

/* Forgot password */
.forgot{ text-align:right; margin-top:6px }
.forgot a{ color:#6aa8ff; text-decoration:none }

/* Primary button */
.primary{ margin-top:18px;width:100%;height:52px;border-radius:14px;border:none;font-size:1.05rem;font-weight:600;background:linear-gradient(90deg,var(--purple1),var(--purple2));color:#fff;}
.primary:active{ box-shadow:var(--persist-glow); transform:scale(.98) }

/* Bottom */
.bottom{text-align:center;margin-top:18px;color:#bbb}
.bottom a{color:#6aa8ff;text-decoration:none}

/* Error */
.err{color:#ff8a8a;text-align:center;margin-top:8px;font-weight:600}
</style>
</head>
<body>

<canvas id="bgCanvas"></canvas>
<div class="glow-area"></div>

<div class="container">
  <div class="brand">
    <img src="sidrafly-logo.png" alt="SidraFly">
    <h1>Welcome <span>Back</span></h1>
    <p>Sign in to your SidraFly account</p>
  </div>

  <!-- Social Buttons -->
  <button class="btn btn-google" id="googleBtn">
    <span class="icon">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path fill="#EA4335" d="M24 9.5c3.1 0 5.2 1.3 6.4 2.4l4.7-4.7C31.8 4.1 28.2 3 24 3 14.8 3 7.1 8.6 3.6 16.3l8.3 6.4C13.1 15.8 18 11 24 11c2.5 0 4.6.9 6.3 2.5L24 19h21c0-.7.1-1.5.1-2.3C45.1 8.6 35.6 3 24 3z"/><path fill="#34A853" d="M24 44c6.2 0 11.4-2 15.2-5.5l-6.9-5.4c-2 1.4-4.8 2.4-8.3 2.4-6.3 0-11.7-4.1-13.7-9.6l-8.3 6.4C7.1 39.4 14.8 44 24 44z"/><path fill="#4285F4" d="M44.5 24.5c0-1.5-.2-2.9-.5-4.2H24v8.1h11.6c-.6 3-2.3 5.6-4.8 7.3l6.9 5.4C41.4 38.2 44.5 32 44.5 24.5z"/><path fill="#FBBC05" d="M11.9 26.5c-.5-1.4-.8-2.8-.8-4.5s.3-3.1.8-4.5l-8.3-6.4C1.6 13.3 0 18.4 0 22s1.6 8.7 3.6 12.4l8.3-6.4z"/></svg>
    </span>
    Continue with Google
  </button>

  <button class="btn" id="msBtn">
    <span class="icon">
      <svg viewBox="0 0 24 24"><rect x="3" y="3" width="8" height="8" fill="#F35325"/><rect x="13" y="3" width="8" height="8" fill="#81BC06"/><rect x="3" y="13" width="8" height="8" fill="#05A6F0"/><rect x="13" y="13" width="8" height="8" fill="#FFBA08"/></svg>
    </span>
    Continue with Microsoft
  </button>

  <button class="btn btn-apple" id="appleBtn">
    <span class="icon"><svg viewBox="0 0 24 24" fill="#fff"><path d="M16.365 13.246c.02 2.199 1.934 2.932 1.955 2.943-.016.05-.306 1.05-1.01 2.07-.61.94-1.244 1.86-2.21 1.88-1 .02-1.32-.61-2.48-.61-1.16 0-1.54.59-2.48.63-.99.04-1.75-1.03-2.36-1.97-1.28-1.94-2.27-5.49-.95-7.9.67-1.18 1.86-1.92 3.14-1.92.99 0 1.91.66 2.48.66.56 0 1.68-.8 2.84-.68.49.02 1.87.2 2.65 1.52z"/></svg></span>
    Sign in with Apple
  </button>

  <button class="btn btn-email" id="emailToggleBtn">
    <span class="icon"><svg viewBox="0 0 24 24" fill="#cfd4e3"><path d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Zm0 4-8 5-8-5V6l8 5 8-5v2z"/></svg></span>
    Continue with Email
  </button>

  <div class="divider">Or sign in with password</div>

  <!-- Email/password form -->
  <div class="field">
    <div class="label"><svg width="18" height="18" fill="#cfd4e3" viewBox="0 0 24 24"><path d="M20 4H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Z"/></svg>Email Address</div>
    <input id="email" type="email" placeholder="Enter your email" autocomplete="username" />
  </div>

  <div class="field">
    <div class="label"><svg width="18" height="18" fill="#cfd4e3" viewBox="0 0 24 24"><path d="M18 10h-1V7a5 5 0 0 0-10 0v3H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2Z"/><circle cx="12" cy="16" r="1.5"/></svg>Password</div>
    <input id="password" type="password" placeholder="Enter your password" autocomplete="current-password" />
  </div>

  <div class="forgot"><a href="#" id="forgotLink">Forgot password?</a></div>

  <button class="primary" id="submitBtn">Sign in</button>

  <div class="err" id="errMsg" style="display:none;"></div>

  <div class="bottom">
    Don't have an account? <a href="#" id="createInlineLink">Create account</a>
  </div>
</div>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script src="firebase-config.js"></script>

<script>
/* background particles */
const c=document.getElementById("bgCanvas"),x=c.getContext("2d");
function rs(){c.width=innerWidth;c.height=innerHeight}rs();addEventListener("resize",rs);
let ps=[...Array(60)].map(()=>({x:Math.random()*c.width,y:Math.random()*c.height,r:Math.random()*2+1,dx:(Math.random()-.5)*.4,dy:(Math.random()-.5)*.4}));
(function an(){x.clearRect(0,0,c.width,c.height);ps.forEach(p=>{x.beginPath();x.fillStyle="rgba(255,255,255,.5)";x.arc(p.x,p.y,p.r,0,Math.PI*2);x.fill();p.x+=p.dx;p.y+=p.dy;if(p.x<0||p.x>c.width)p.dx*=-1;if(p.y<0||p.y>c.height)p.dy*=-1;});requestAnimationFrame(an);})();

/* Firebase */
const auth=firebase.auth(); const db=firebase.firestore();
const submitBtn=document.getElementById('submitBtn');
const errMsg=document.getElementById('errMsg');
let mode='signin';

/* Toggle mode */
document.getElementById('createInlineLink').addEventListener('click',e=>{
  e.preventDefault();
  mode = mode==='signin'?'create':'signin';
  document.querySelector('.brand h1').innerHTML = mode==='signin'?'Welcome <span>Back</span>':'Create <span>Account</span>';
  submitBtn.innerText = mode==='signin'?'Sign in':'Create account';
  errMsg.style.display='none';
});

/* Forgot password */
document.getElementById('forgotLink').addEventListener('click',e=>{
  e.preventDefault();
  const email=document.getElementById('email').value.trim();
  if(!email){showErr('Enter your email first');return;}
  auth.sendPasswordResetEmail(email).then(()=>alert('Password reset email sent')).catch(err=>showErr(err.message));
});

/* Submit */
submitBtn.addEventListener('click',e=>{
  e.preventDefault();
  const email=document.getElementById('email').value.trim();
  const password=document.getElementById('password').value.trim();
  if(!email||!password){showErr('Please enter email and password');return;}
  if(mode==='signin'){signInEmail(email,password);} else {createAccount(email,password);}
});

function showErr(msg){errMsg.innerText=msg;errMsg.style.display='block';}

/* Auth */
function signInEmail(email,password){
  auth.signInWithEmailAndPassword(email,password)
    .then(()=>window.location.href='dashboard.html')
    .catch(err=>showErr(err.message));
}

function createAccount(email,password){
  auth.createUserWithEmailAndPassword(email,password)
    .then(uc=>{
      const uid=uc.user.uid;
      window.location.href=`profile-setup.html?uid=${uid}`;
    })
    .catch(err=>showErr(err.message));
}

/* Social */
document.getElementById('googleBtn').addEventListener('click',()=>{
  const p=new firebase.auth.GoogleAuthProvider();
  auth.signInWithPopup(p).then(()=>window.location.href='dashboard.html').catch(err=>showErr(err.message));
});

document.getElementById('msBtn').addEventListener('click',()=>{
  const p=new firebase.auth.OAuthProvider('microsoft.com');
  auth.signInWithPopup(p).then(()=>window.location.href='dashboard.html').catch(err=>showErr(err.message));
});

/* Glow */
document.querySelectorAll('.btn').forEach(b=>b.addEventListener('click',()=>{
  document.querySelectorAll('.btn').forEach(x=>x.classList.remove('active'));
  b.classList.add('active');
}));
</script>

</body>
</html>
