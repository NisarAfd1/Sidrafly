<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SidraFly Auth System</title>
</head>
<body>
  <h1>SidraFly Login / Signup</h1>

  <input id="email" type="email" placeholder="Email"><br><br>
  <input id="password" type="password" placeholder="Password"><br><br>

  <button id="signupBtn">Create Account</button>
  <button id="loginBtn">Login</button>
  <button id="googleLoginBtn">Login with Google</button>
  <button id="logoutBtn" style="display:none">Logout</button>

  <p id="status"></p>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import {
      getAuth,
      createUserWithEmailAndPassword,
      signInWithEmailAndPassword,
      signOut,
      onAuthStateChanged,
      GoogleAuthProvider,
      signInWithPopup
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDgOAWWOXKbCKwpGaIZOqkZmHIA6z9wJ8M",
      authDomain: "sidrafly-57bed.firebaseapp.com",
      projectId: "sidrafly-57bed",
      storageBucket: "sidrafly-57bed.firebasestorage.app",
      messagingSenderId: "441230761869",
      appId: "1:441230761869:web:f054dcc8ccfd29e8c4a7c4"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const googleProvider = new GoogleAuthProvider();

    const email = document.getElementById("email");
    const password = document.getElementById("password");
    const signupBtn = document.getElementById("signupBtn");
    const loginBtn = document.getElementById("loginBtn");
    const googleLoginBtn = document.getElementById("googleLoginBtn");
    const logoutBtn = document.getElementById("logoutBtn");
    const status = document.getElementById("status");

    signupBtn.onclick = () => {
      createUserWithEmailAndPassword(auth, email.value, password.value)
        .then(() => status.innerText = "âœ… Account created")
        .catch(err => status.innerText = "âŒ " + err.message);
    };

    loginBtn.onclick = () => {
      signInWithEmailAndPassword(auth, email.value, password.value)
        .then(() => status.innerText = "âœ… Logged in")
        .catch(err => status.innerText = "âŒ " + err.message);
    };

    googleLoginBtn.onclick = () => {
      signInWithPopup(auth, googleProvider)
        .then(() => status.innerText = "âœ… Google login successful")
        .catch(err => status.innerText = "âŒ " + err.message);
    };

    logoutBtn.onclick = () => signOut(auth);

    onAuthStateChanged(auth, user => {
      if (user) {
        status.innerText = `âœ… Logged in as: ${user.email}`;
        logoutBtn.style.display = "inline-block";
      } else {
        status.innerText = "ðŸ”’ Logged out";
        logoutBtn.style.display = "none";
      }
    });
  </script>
</body>
</html>
